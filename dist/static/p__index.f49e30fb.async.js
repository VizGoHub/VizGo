(self.webpackChunk=self.webpackChunk||[]).push([[866],{5100:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),echarts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64389),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(85893),ChartView=function ChartView(_ref){var chartID=_ref.chartID,scripts=_ref.scripts,data=_ref.data,chartRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var chartDom=chartRef.current,myChart=echarts__WEBPACK_IMPORTED_MODULE_1__.S1(chartDom),option={};try{try{eval(scripts),myChart.setOption(option)}catch(E){console.log(E)}}catch(E){}var resizeObserver=new ResizeObserver(function(){myChart.resize()});return resizeObserver.observe(chartDom),function(){myChart.dispose(),resizeObserver.disconnect()}},[chartID,scripts,data]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{ref:chartRef,style:{width:"100%",height:"100%"}})};__webpack_exports__.Z=ChartView},93040:function(E,C,e){"use strict";e.r(C),e.d(C,{default:function(){return c}});var R=e(15009),n=e.n(R),M=e(99289),d=e.n(M),T=e(5574),l=e.n(T),s=e(67294),O=e(67066),m=e(5100),t=e(85893),p=function(a){var u=a.chartID,L=(0,s.useState)(!1),P=l()(L,2),b=P[0],z=P[1],S=(0,s.useState)({}),y=l()(S,2),o=y[0],f=y[1],D=(0,s.useCallback)(function(){var g=d()(n()().mark(function r(U){var j;return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,O.fy(U);case 3:j=i.sent,j&&j.code===0&&(f(j.data),z(!0)),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),console.error("Error loading chart data:",i.t0);case 10:case"end":return i.stop()}},r,null,[[0,7]])}));return function(r){return g.apply(this,arguments)}}(),[]);if((0,s.useEffect)(function(){var g=function r(){D(u).then(function(U){console.log("Chart Loaded, ChartID=",u)}),setTimeout(r,1e4)};return g(),function(){}},[u]),b)return(0,t.jsx)(m.Z,{chartID:u,scripts:o.chart.chart_code,data:o})},I=p,v=e(50942),_=e(86548);function c(){var h=(0,s.useState)(!1),a=l()(h,2),u=a[0],L=a[1],P=(0,s.useState)({}),b=l()(P,2),z=b[0],S=b[1],y=function(){var o=d()(n()().mark(function f(){var D;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.GQ();case 3:D=r.sent,console.log(D),S(D.data),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error loading charts data:",r.t0);case 11:case"end":return r.stop()}},f,null,[[0,8]])}));return function(){return o.apply(this,arguments)}}();return(0,s.useEffect)(function(){y().then(function(o){console.log("Init Completed"),L(!0)})},[]),(0,t.jsx)("div",{children:u?z.map(function(o,f){return(0,t.jsxs)("div",{style:{float:"left"},children:[(0,t.jsxs)("h4",{children:[(0,t.jsx)("span",{style:{paddingRight:5},children:(0,t.jsx)(v.rU,{to:"/editor/"+o.chart_id,children:(0,t.jsx)(_.Z,{style:{fontSize:"16px",color:"#08c"}})})}),(0,t.jsxs)("span",{children:["[",o.chart_id,"]",o.chart_name]}),(0,t.jsxs)("span",{style:{fontSize:"0.2em"},children:["(",new Date().toLocaleTimeString(),")"]})]}),(0,t.jsx)("div",{style:{height:300,minWidth:400,float:"left"},children:(0,t.jsx)(I,{chartID:o.chart_id},f)})]})}):(0,t.jsx)("div",{children:"Loading..."})})}},67066:function(E,C,e){"use strict";e.d(C,{GQ:function(){return O},MP:function(){return I},fy:function(){return t}});var R=e(15009),n=e.n(R),M=e(97857),d=e.n(M),T=e(99289),l=e.n(T),s=e(11238);function O(_){return m.apply(this,arguments)}function m(){return m=l()(n()().mark(function _(c){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.ZP)("/api/charts",d()({method:"GET"},c||{})));case 1:case"end":return a.stop()}},_)})),m.apply(this,arguments)}function t(_,c){return p.apply(this,arguments)}function p(){return p=l()(n()().mark(function _(c,h){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,s.ZP)("/api/chartData/".concat(c),d()({method:"GET"},h||{})));case 1:case"end":return u.stop()}},_)})),p.apply(this,arguments)}function I(_){return v.apply(this,arguments)}function v(){return v=l()(n()().mark(function _(c){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.ZP)("/api/updateChart",d()({method:"POST"},c||{})));case 1:case"end":return a.stop()}},_)})),v.apply(this,arguments)}},24654:function(){}}]);
