(self.webpackChunk=self.webpackChunk||[]).push([[866],{5100:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),echarts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64389),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(85893),ChartView=function ChartView(_ref){var chartID=_ref.chartID,scripts=_ref.scripts,data=_ref.data,chartRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var chartDom=chartRef.current,myChart=echarts__WEBPACK_IMPORTED_MODULE_1__.S1(chartDom),option={};try{try{eval(scripts),myChart.setOption(option)}catch(E){console.log(E)}}catch(E){}var resizeObserver=new ResizeObserver(function(){myChart.resize()});return resizeObserver.observe(chartDom),function(){myChart.dispose(),resizeObserver.disconnect()}},[chartID,scripts,data]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{ref:chartRef,style:{width:"100%",height:"100%"}})};__webpack_exports__.Z=ChartView},93040:function(E,C,e){"use strict";e.r(C),e.d(C,{default:function(){return v}});var M=e(15009),t=e.n(M),R=e(99289),d=e.n(R),T=e(5574),h=e.n(T),n=e(67294),b=e(67066),m=e(5100),i=e(85893),p=function(u){var o=u.chartID,a=(0,n.useState)(!1),l=h()(a,2),O=l[0],I=l[1],L=(0,n.useState)({}),P=h()(L,2),c=P[0],f=P[1],D=(0,n.useCallback)(function(){var y=d()(t()().mark(function r(z){var g;return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,b.fy(z);case 3:g=_.sent,g&&g.code===0&&(f(g.data),I(!0)),_.next=10;break;case 7:_.prev=7,_.t0=_.catch(0),console.error("Error loading chart data:",_.t0);case 10:case"end":return _.stop()}},r,null,[[0,7]])}));return function(r){return y.apply(this,arguments)}}(),[]);if((0,n.useEffect)(function(){var y=function r(){D(o).then(function(z){console.log("Chart Loaded, ChartID=",o)}),setTimeout(r,1e4)};return y(),function(){}},[o]),O)return(0,i.jsx)(m.Z,{chartID:o,scripts:c.chart.chart_code,data:c})},j=p;function v(){var s=(0,n.useState)(!1),u=h()(s,2),o=u[0],a=u[1],l=(0,n.useState)({}),O=h()(l,2),I=O[0],L=O[1],P=function(){var c=d()(t()().mark(function f(){var D;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.GQ();case 3:D=r.sent,console.log(D),L(D.data),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error loading charts data:",r.t0);case 11:case"end":return r.stop()}},f,null,[[0,8]])}));return function(){return c.apply(this,arguments)}}();return(0,n.useEffect)(function(){P().then(function(c){console.log("Init Completed"),a(!0)})},[]),(0,i.jsx)("div",{children:o?I.map(function(c,f){return(0,i.jsxs)("div",{style:{float:"left"},children:[(0,i.jsxs)("h3",{children:["[",c.chart_id,"]",c.chart_name,(0,i.jsxs)("span",{style:{fontSize:"0.2em"},children:["(",new Date().toLocaleTimeString(),")"]})]}),(0,i.jsx)("div",{style:{height:300,minWidth:400,float:"left"},children:(0,i.jsx)(j,{chartID:c.chart_id},f)})]})}):(0,i.jsx)("div",{children:"Loading..."})})}},67066:function(E,C,e){"use strict";e.d(C,{GQ:function(){return b},MP:function(){return j},fy:function(){return i}});var M=e(15009),t=e.n(M),R=e(97857),d=e.n(R),T=e(99289),h=e.n(T),n=e(11238);function b(s){return m.apply(this,arguments)}function m(){return m=h()(t()().mark(function s(u){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.ZP)("/api/charts",d()({method:"GET"},u||{})));case 1:case"end":return a.stop()}},s)})),m.apply(this,arguments)}function i(s,u){return p.apply(this,arguments)}function p(){return p=h()(t()().mark(function s(u,o){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,n.ZP)("/api/chartData/".concat(u),d()({method:"GET"},o||{})));case 1:case"end":return l.stop()}},s)})),p.apply(this,arguments)}function j(s){return v.apply(this,arguments)}function v(){return v=h()(t()().mark(function s(u){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.ZP)("/api/updateChart",d()({method:"POST"},u||{})));case 1:case"end":return a.stop()}},s)})),v.apply(this,arguments)}},24654:function(){}}]);
