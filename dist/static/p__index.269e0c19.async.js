(self.webpackChunk=self.webpackChunk||[]).push([[866],{26827:function(Z,L,t){"use strict";t.r(L),t.d(L,{default:function(){return W}});var S=t(15009),h=t.n(S),A=t(99289),g=t.n(A),E=t(5574),j=t.n(E),d=t(67294),R=t(97857),x=t.n(R),T=t(11238);function I(c,e){return y.apply(this,arguments)}function y(){return y=g()(h()().mark(function c(e,s){return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,T.ZP)("/api/chart/".concat(e),x()({method:"GET"},s||{})));case 1:case"end":return u.stop()}},c)})),y.apply(this,arguments)}function G(c){return C.apply(this,arguments)}function C(){return C=g()(h()().mark(function c(e){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,T.ZP)("/api/charts",x()({method:"GET"},e||{})));case 1:case"end":return i.stop()}},c)})),C.apply(this,arguments)}var H=t(1809),w=t(64389),n=t(85893),z=function(e){var s=e.titleText,i=e.legendData,u=e.xAxisData,o=e.seriesData,r=(0,d.useRef)(null);return(0,d.useEffect)(function(){var f=r.current,p=w.S1(f),a={title:{},tooltip:{trigger:"axis"},legend:{data:i},xAxis:{type:"category",boundaryGap:!1,data:u,splitLine:{show:!0},axisLabel:{rotate:45,formatter:function(m){return m.length>16?m.slice(0,16)+"...":m}}},yAxis:{type:"value"},series:o};p.setOption(a);var v=new ResizeObserver(function(){p.resize()});return v.observe(f),function(){p.dispose(),v.disconnect()}},[s,i,u,o]),(0,n.jsx)("div",{ref:r,style:{width:"100%",height:"100%"}})},$=z,O=function(e){var s=e.chartID,i=(0,d.useRef)(null),u=(0,d.useState)(null),o=j()(u,2),r=o[0],f=o[1],p=function(){var a=g()(h()().mark(function v(D){var m;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,I(D);case 3:m=l.sent,f(m.data),l.next=10;break;case 7:l.prev=7,l.t0=l.catch(0),console.error("Error loading chart data:",l.t0);case 10:case"end":return l.stop()}},v,null,[[0,7]])}));return function(D){return a.apply(this,arguments)}}();return(0,d.useEffect)(function(){var a=function v(){p(s).then(function(D){console.log("Chart Loaded, ChartID=",s)}),setTimeout(v,1e4)};return a(),function(){}},[s]),(0,n.jsx)("div",{children:r?(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{children:[r.name,(0,n.jsxs)("span",{style:{fontSize:"0.2em"},children:["(",new Date().toLocaleTimeString(),")"]})]}),(0,n.jsx)("div",{style:{height:"300px"},children:(0,n.jsx)($,{titleText:r.name,legendData:r.legends,xAxisData:r.labels,seriesData:r.datasets})})]}):(0,n.jsx)("div",{children:"Loading..."})})},P=O;function W(){var c=(0,d.useState)(null),e=j()(c,2),s=e[0],i=e[1],u=function(){var o=g()(h()().mark(function r(){var f;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G();case 3:f=a.sent,i(f.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("Error loading charts data:",a.t0);case 10:case"end":return a.stop()}},r,null,[[0,7]])}));return function(){return o.apply(this,arguments)}}();return(0,d.useEffect)(function(){u().then(function(o){console.log("Init Completed")})},[]),(0,n.jsx)("div",{children:s?s.map(function(o,r){return(0,n.jsx)(P,{chartID:o.chartID},r)}):(0,n.jsx)("div",{children:"Loading..."})})}},24654:function(){}}]);
